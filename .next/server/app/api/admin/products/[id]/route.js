(()=>{var e={};e.id=8616,e.ids=[8616],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},48963:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>w,routeModule:()=>l,serverHooks:()=>y,workAsyncStorage:()=>m,workUnitAsyncStorage:()=>g});var i={};t.r(i),t.d(i,{DELETE:()=>p,GET:()=>u,PATCH:()=>d});var s=t(96559),a=t(48088),n=t(37719),o=t(32190);let c=new(t(96330)).PrismaClient;async function u(e,{params:r}){try{let{id:e}=await r,t=await c.product.findUnique({where:{id:e},include:{category:{select:{id:!0,name:!0,slug:!0}}}});if(!t)return o.NextResponse.json({success:!1,error:"\xdcr\xfcn bulunamadı"},{status:404});let i={id:t.id,name:t.name,slug:t.slug,description:t.description,price:Number(t.price),originalPrice:t.originalPrice?Number(t.originalPrice):null,images:t.images,stock:t.stock,isActive:t.isActive,isFeatured:t.isFeatured,categoryId:t.categoryId,category:t.category,createdAt:t.createdAt,updatedAt:t.updatedAt};return o.NextResponse.json({success:!0,data:i})}catch(e){return console.error("Admin Product GET Error:",e),o.NextResponse.json({success:!1,error:"\xdcr\xfcn y\xfcklenirken hata oluştu"},{status:500})}finally{await c.$disconnect()}}async function d(e,{params:r}){try{let{id:t}=await r,i=await e.json(),s={};for(let e of["isActive","isFeatured","name","description","price","originalPrice","stock","categoryId","images"])void 0!==i[e]&&(s[e]=i[e]);void 0!==s.price&&(s.price=Number(s.price)),void 0!==s.originalPrice&&(s.originalPrice=s.originalPrice?Number(s.originalPrice):null),void 0!==s.stock&&(s.stock=Number(s.stock)),void 0!==s.description&&(s.description=s.description.trim()||null);let a=await c.product.update({where:{id:t},data:s,include:{category:{select:{name:!0,slug:!0}}}}),n={id:a.id,name:a.name,slug:a.slug,description:a.description,price:Number(a.price),originalPrice:a.originalPrice?Number(a.originalPrice):null,images:a.images,stock:a.stock,isActive:a.isActive,isFeatured:a.isFeatured,category:a.category,createdAt:a.createdAt,updatedAt:a.updatedAt};return o.NextResponse.json({success:!0,message:"\xdcr\xfcn başarıyla g\xfcncellendi",data:n})}catch(e){return console.error("Admin Product PATCH Error:",e),o.NextResponse.json({success:!1,error:"\xdcr\xfcn g\xfcncellenirken hata oluştu"},{status:500})}finally{await c.$disconnect()}}async function p(e,{params:r}){try{let{id:e}=await r;if(!await c.product.findUnique({where:{id:e}}))return o.NextResponse.json({success:!1,error:"\xdcr\xfcn bulunamadı"},{status:404});return await c.$transaction([c.cartItem.deleteMany({where:{productId:e}}),c.orderItem.deleteMany({where:{productId:e}}),c.review.deleteMany({where:{productId:e}}),c.discount.deleteMany({where:{productId:e}}),c.product.delete({where:{id:e}})]),o.NextResponse.json({success:!0,message:"\xdcr\xfcn başarıyla silindi"})}catch(e){return console.error("Admin Product DELETE Error:",e),o.NextResponse.json({success:!1,error:"\xdcr\xfcn silinirken hata oluştu"},{status:500})}finally{await c.$disconnect()}}let l=new s.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/admin/products/[id]/route",pathname:"/api/admin/products/[id]",filename:"route",bundlePath:"app/api/admin/products/[id]/route"},resolvedPagePath:"/Users/home/Desktop/site/src/app/api/admin/products/[id]/route.ts",nextConfigOutput:"",userland:i}),{workAsyncStorage:m,workUnitAsyncStorage:g,serverHooks:y}=l;function w(){return(0,n.patchFetch)({workAsyncStorage:m,workUnitAsyncStorage:g})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},96330:e=>{"use strict";e.exports=require("@prisma/client")},96487:()=>{}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),i=r.X(0,[4243,580],()=>t(48963));module.exports=i})();