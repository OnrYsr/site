(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[570],{1154:(e,a,r)=>{"use strict";r.d(a,{A:()=>t});let t=(0,r(9946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},4229:(e,a,r)=>{"use strict";r.d(a,{A:()=>t});let t=(0,r(9946).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},5460:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>m});var t=r(5155),s=r(2115),i=r(5695),l=r(7550),n=r(1154),d=r(4229),o=r(6874),c=r.n(o);function m(){let e=(0,i.useRouter)(),[a,r]=(0,s.useState)(!1),[o,m]=(0,s.useState)([]),[u,h]=(0,s.useState)({name:"",description:"",image:"",parentId:"",displayOrder:0,isActive:!0}),[p,x]=(0,s.useState)({}),[g,y]=(0,s.useState)("");(0,s.useEffect)(()=>{b()},[]);let b=async()=>{try{let e=await fetch("/api/categories"),a=await e.json();if(a.success){let e=a.data.filter(e=>!e.parentId);m(e)}}catch(e){console.error("Categories fetch error:",e)}},j=()=>{let e={};return u.name.trim()||(e.name="Kategori adı gereklidir"),(u.displayOrder<0||u.displayOrder>999)&&(e.displayOrder="G\xf6sterim sırası 0-999 arasında olmalıdır"),x(e),0===Object.keys(e).length},f=async a=>{if(a.preventDefault(),j()){r(!0),x({}),y("");try{let a=await fetch("/api/categories",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:u.name.trim(),description:u.description.trim()||null,image:u.image.trim()||null,displayOrder:parseInt(u.displayOrder.toString())||0,parentId:u.parentId||null,isActive:u.isActive})}),r=await a.json();r.success?(y("Kategori başarıyla oluşturuldu! Y\xf6nlendiriliyorsunuz..."),setTimeout(()=>{e.push("/admin/categories")},1500)):x({general:r.error||"Kategori oluşturulamadı"})}catch(e){console.error("Create category error:",e),x({general:"Bir hata oluştu. L\xfctfen tekrar deneyin."})}finally{r(!1)}}},v=e=>{let{name:a,value:r,type:t}=e.target;h(s=>({...s,[a]:"checkbox"===t?e.target.checked:r})),p[a]&&x(e=>({...e,[a]:""}))};return(0,t.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("div",{className:"flex items-center gap-4 mb-4",children:(0,t.jsxs)(c(),{href:"/admin/categories",className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors",children:[(0,t.jsx)(l.A,{className:"w-5 h-5"}),"Kategorilere D\xf6n"]})}),(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Yeni Kategori"}),(0,t.jsx)("p",{className:"text-gray-600 mt-2",children:"Yeni bir kategori oluşturun"})]}),g&&(0,t.jsx)("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-6",children:g}),p.general&&(0,t.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6",children:p.general}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,t.jsxs)("form",{onSubmit:f,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Kategori Adı *"}),(0,t.jsx)("input",{type:"text",id:"name",name:"name",value:u.name,onChange:v,className:"admin-input ".concat(p.name?"border-red-500":""),placeholder:"Kategori adını girin",required:!0}),p.name&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:p.name})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"parentId",className:"block text-sm font-medium text-gray-700 mb-2",children:"\xdcst Kategori"}),(0,t.jsxs)("select",{id:"parentId",name:"parentId",value:u.parentId,onChange:v,className:"admin-select",children:[(0,t.jsx)("option",{value:"",children:"Ana Kategori Olarak Oluştur"}),o.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,t.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:"Boş bırakırsanız ana kategori olarak oluşturulur"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"displayOrder",className:"block text-sm font-medium text-gray-700 mb-2",children:"G\xf6sterim Sırası *"}),(0,t.jsx)("input",{type:"number",id:"displayOrder",name:"displayOrder",value:u.displayOrder,onChange:v,className:"admin-input ".concat(p.displayOrder?"border-red-500":""),placeholder:"G\xf6sterim sırasını girin (0-999)",min:"0",max:"999",required:!0}),p.displayOrder&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:p.displayOrder}),(0,t.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:"K\xfc\xe7\xfck sayılar \xf6nce g\xf6r\xfcn\xfcr (0, 1, 2...)"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"A\xe7ıklama"}),(0,t.jsx)("textarea",{id:"description",name:"description",value:u.description,onChange:v,rows:4,className:"admin-textarea",placeholder:"Kategori a\xe7ıklamasını girin (opsiyonel)"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"image",className:"block text-sm font-medium text-gray-700 mb-2",children:"G\xf6rsel URL'si"}),(0,t.jsx)("input",{type:"url",id:"image",name:"image",value:u.image,onChange:v,className:"admin-input",placeholder:"https://example.com/image.jpg (opsiyonel)"})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",id:"isActive",name:"isActive",checked:u.isActive,onChange:v,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,t.jsx)("label",{htmlFor:"isActive",className:"ml-2 text-sm text-gray-700",children:"Kategori aktif olsun"})]}),(0,t.jsxs)("div",{className:"flex gap-4 pt-6",children:[(0,t.jsxs)("button",{type:"submit",disabled:a,className:"flex items-center gap-2 bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[a?(0,t.jsx)(n.A,{className:"w-5 h-5 animate-spin"}):(0,t.jsx)(d.A,{className:"w-5 h-5"}),a?"Oluşturuluyor...":"Kategori Oluştur"]}),(0,t.jsx)(c(),{href:"/admin/categories",className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-50 transition-colors",children:"İptal"})]})]})})]})}},5695:(e,a,r)=>{"use strict";var t=r(8999);r.o(t,"useParams")&&r.d(a,{useParams:function(){return t.useParams}}),r.o(t,"usePathname")&&r.d(a,{usePathname:function(){return t.usePathname}}),r.o(t,"useRouter")&&r.d(a,{useRouter:function(){return t.useRouter}}),r.o(t,"useSearchParams")&&r.d(a,{useSearchParams:function(){return t.useSearchParams}})},5902:(e,a,r)=>{Promise.resolve().then(r.bind(r,5460))},7550:(e,a,r)=>{"use strict";r.d(a,{A:()=>t});let t=(0,r(9946).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])}},e=>{var a=a=>e(e.s=a);e.O(0,[95,8441,9303,7358],()=>a(5902)),_N_E=e.O()}]);