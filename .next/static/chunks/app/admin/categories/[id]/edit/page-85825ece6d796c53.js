(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4036],{110:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>p});var t=s(5155),r=s(2115),i=s(5695),l=s(1154),n=s(5339),d=s(7550),c=s(2657),m=s(4229),o=s(7108),x=s(7580),h=s(6874),g=s.n(h);function p(){(0,i.useRouter)();let e=(0,i.useParams)().id,[a,s]=(0,r.useState)(!1),[h,p]=(0,r.useState)(!0),[u,y]=(0,r.useState)(null),[j,b]=(0,r.useState)([]),[v,N]=(0,r.useState)({name:"",description:"",image:"",parentId:"",displayOrder:0,isActive:!0}),[f,k]=(0,r.useState)({}),[A,w]=(0,r.useState)("");(0,r.useEffect)(()=>{e&&(K(),O())},[e]);let K=async()=>{try{let a=await fetch("/api/categories/".concat(e)),s=await a.json();if(s.success){let e=s.data;y(e),N({name:e.name,description:e.description||"",image:e.image||"",parentId:e.parentId||"",displayOrder:e.displayOrder||0,isActive:e.isActive})}else k({general:"Kategori bulunamadı"})}catch(e){console.error("Category fetch error:",e),k({general:"Kategori y\xfcklenirken hata oluştu"})}finally{p(!1)}},O=async()=>{try{let a=await fetch("/api/categories"),s=await a.json();if(s.success){let a=s.data.filter(a=>!a.parentId&&a.id!==e);b(a)}}catch(e){console.error("Categories fetch error:",e)}},I=()=>{let a={};return v.name.trim()||(a.name="Kategori adı gereklidir"),v.parentId===e&&(a.parentId="Kategori kendisinin alt kategorisi olamaz"),(v.displayOrder<0||v.displayOrder>999)&&(a.displayOrder="G\xf6sterim sırası 0-999 arasında olmalıdır"),k(a),0===Object.keys(a).length},S=async a=>{if(a.preventDefault(),I()){s(!0),k({}),w("");try{let a=await fetch("/api/categories/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:v.name.trim(),description:v.description.trim()||null,image:v.image.trim()||null,parentId:v.parentId||null,displayOrder:parseInt(v.displayOrder.toString())||0,isActive:v.isActive})}),s=await a.json();s.success?(w("Kategori başarıyla g\xfcncellendi!"),await K()):k({general:s.error||"Kategori g\xfcncellenemedi"})}catch(e){console.error("Update category error:",e),k({general:"Bir hata oluştu. L\xfctfen tekrar deneyin."})}finally{s(!1)}}},C=e=>{let{name:a,value:s,type:t}=e.target;N(r=>({...r,[a]:"checkbox"===t?e.target.checked:s})),f[a]&&k(e=>({...e,[a]:""}))};return h?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-96",children:(0,t.jsx)(l.A,{className:"w-8 h-8 animate-spin text-gray-400"})}):u?(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("div",{className:"flex items-center gap-4 mb-4",children:(0,t.jsxs)(g(),{href:"/admin/categories",className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors",children:[(0,t.jsx)(d.A,{className:"w-5 h-5"}),"Kategorilere D\xf6n"]})}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Kategori D\xfczenle"}),(0,t.jsxs)("p",{className:"text-gray-600 mt-2",children:[u.parent&&(0,t.jsxs)("span",{className:"text-blue-600",children:[u.parent.name," →"," "]}),u.name," kategorisini d\xfczenleyin"]})]}),(0,t.jsxs)(g(),{href:"/products?category=".concat(u.slug),className:"flex items-center gap-2 px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors",children:[(0,t.jsx)(c.A,{className:"w-4 h-4"}),"\xd6nizle"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsxs)("div",{className:"lg:col-span-2",children:[A&&(0,t.jsx)("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-6",children:A}),f.general&&(0,t.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6",children:f.general}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,t.jsxs)("form",{onSubmit:S,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Kategori Adı *"}),(0,t.jsx)("input",{type:"text",id:"name",name:"name",value:v.name,onChange:C,className:"admin-input ".concat(f.name?"border-red-500":""),placeholder:"Kategori adını girin",required:!0}),f.name&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:f.name})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"parentId",className:"block text-sm font-medium text-gray-700 mb-2",children:"\xdcst Kategori"}),(0,t.jsxs)("select",{id:"parentId",name:"parentId",value:v.parentId,onChange:C,className:"admin-select ".concat(f.parentId?"border-red-500":""),children:[(0,t.jsx)("option",{value:"",children:"Ana Kategori"}),j.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]}),f.parentId&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:f.parentId}),(0,t.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:u.parent?'Şu anda "'.concat(u.parent.name,'" kategorisinin alt kategorisi'):"Şu anda ana kategori"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"displayOrder",className:"block text-sm font-medium text-gray-700 mb-2",children:"G\xf6sterim Sırası *"}),(0,t.jsx)("input",{type:"number",id:"displayOrder",name:"displayOrder",value:v.displayOrder,onChange:C,className:"admin-input ".concat(f.displayOrder?"border-red-500":""),placeholder:"G\xf6sterim sırasını girin (0-999)",min:"0",max:"999",required:!0}),f.displayOrder&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:f.displayOrder}),(0,t.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:"K\xfc\xe7\xfck sayılar \xf6nce g\xf6r\xfcn\xfcr (0, 1, 2...)"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"A\xe7ıklama"}),(0,t.jsx)("textarea",{id:"description",name:"description",value:v.description,onChange:C,rows:4,className:"admin-textarea",placeholder:"Kategori a\xe7ıklamasını girin (opsiyonel)"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"image",className:"block text-sm font-medium text-gray-700 mb-2",children:"G\xf6rsel URL'si"}),(0,t.jsx)("input",{type:"url",id:"image",name:"image",value:v.image,onChange:C,className:"admin-input",placeholder:"https://example.com/image.jpg (opsiyonel)"})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",id:"isActive",name:"isActive",checked:v.isActive,onChange:C,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,t.jsx)("label",{htmlFor:"isActive",className:"ml-2 text-sm text-gray-700",children:"Kategori aktif olsun"})]}),(0,t.jsxs)("div",{className:"flex gap-4 pt-6",children:[(0,t.jsxs)("button",{type:"submit",disabled:a,className:"flex items-center gap-2 bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[a?(0,t.jsx)(l.A,{className:"w-5 h-5 animate-spin"}):(0,t.jsx)(m.A,{className:"w-5 h-5"}),a?"G\xfcncelleniyor...":"Değişiklikleri Kaydet"]}),(0,t.jsx)(g(),{href:"/admin/categories",className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-50 transition-colors",children:"İptal"})]})]})})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Kategori İstatistikleri"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(o.A,{className:"w-5 h-5 text-blue-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-gray-500",children:"\xdcr\xfcn Sayısı"}),(0,t.jsx)("div",{className:"font-semibold",children:u.productCount})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(x.A,{className:"w-5 h-5 text-green-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-gray-500",children:"Alt Kategori Sayısı"}),(0,t.jsx)("div",{className:"font-semibold",children:u.subcategories.length})]})]})]})]}),u.subcategories.length>0&&(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Alt Kategoriler"}),(0,t.jsx)("div",{className:"space-y-3",children:u.subcategories.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,t.jsx)("span",{className:"font-medium text-gray-900",children:e.name}),(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:[e.productCount," \xfcr\xfcn"]})]},e.id))})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Kategori Hiyerarşisi"}),(0,t.jsx)("div",{className:"space-y-2 text-sm",children:u.parent?(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-500",children:"\xdcst Kategori:"}),(0,t.jsx)("div",{className:"font-medium text-blue-600 mt-1",children:u.parent.name})]}):(0,t.jsx)("div",{className:"text-gray-500",children:"Ana kategori"})})]})]})]})]}):(0,t.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,t.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6 flex items-center gap-2",children:[(0,t.jsx)(n.A,{className:"w-5 h-5"}),"Kategori bulunamadı"]}),(0,t.jsxs)(g(),{href:"/admin/categories",className:"flex items-center gap-2 text-blue-600 hover:text-blue-800",children:[(0,t.jsx)(d.A,{className:"w-5 h-5"}),"Kategorilere D\xf6n"]})]})}},1154:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(9946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},2657:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(9946).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},4229:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(9946).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},4312:(e,a,s)=>{Promise.resolve().then(s.bind(s,110))},5339:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(9946).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},5695:(e,a,s)=>{"use strict";var t=s(8999);s.o(t,"useParams")&&s.d(a,{useParams:function(){return t.useParams}}),s.o(t,"usePathname")&&s.d(a,{usePathname:function(){return t.usePathname}}),s.o(t,"useRouter")&&s.d(a,{useRouter:function(){return t.useRouter}}),s.o(t,"useSearchParams")&&s.d(a,{useSearchParams:function(){return t.useSearchParams}})},7108:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(9946).A)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},7550:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(9946).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},7580:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(9946).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])}},e=>{var a=a=>e(e.s=a);e.O(0,[95,8441,9303,7358],()=>a(4312)),_N_E=e.O()}]);