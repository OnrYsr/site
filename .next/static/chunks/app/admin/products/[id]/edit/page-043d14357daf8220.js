(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1684],{1446:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>o});var r=t(5155),s=t(2115),i=t(7550),n=t(4229),l=t(6874),c=t.n(l),d=t(5695);function o(){let e=(0,d.useParams)(),a=(0,d.useRouter)(),t=e.id,[l,o]=(0,s.useState)(null),[m,u]=(0,s.useState)([]),[h,x]=(0,s.useState)(!0),[p,g]=(0,s.useState)(!1),[y,b]=(0,s.useState)(null),[j,k]=(0,s.useState)({name:"",description:"",price:0,originalPrice:0,stock:0,categoryId:"",images:"",isActive:!0,isFeatured:!1});(0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/categories");if(e.ok){let a=await e.json();a.success&&a.data?u(a.data):(console.error("Kategoriler y\xfcklenirken hata:",a.error),u([]))}}catch(e){console.error("Kategoriler y\xfcklenirken hata:",e),u([])}})()},[]),(0,s.useEffect)(()=>{(async()=>{if(t)try{x(!0),b(null);let e=await fetch("/api/admin/products/".concat(t));if(!e.ok)return void(404===e.status?b("\xdcr\xfcn bulunamadı"):b("\xdcr\xfcn y\xfcklenirken hata oluştu"));let a=await e.json();if(!a.success||!a.data)return void b("\xdcr\xfcn verileri alınamadı");let r=a.data;o(r),k({name:r.name,description:r.description||"",price:r.price,originalPrice:r.originalPrice||0,stock:r.stock,categoryId:r.categoryId,images:r.images.join(", "),isActive:r.isActive,isFeatured:r.isFeatured})}catch(e){console.error("\xdcr\xfcn y\xfcklenirken hata:",e),b("\xdcr\xfcn y\xfcklenirken hata oluştu")}finally{x(!1)}})()},[t]);let v=e=>{let{name:a,value:t,type:r}=e.target;k(s=>({...s,[a]:"checkbox"===r&&"checked"in e.target?e.target.checked:"number"===r?Number(t):t}))},f=async e=>{e.preventDefault(),g(!0),b(null);try{let e=j.images.split(",").map(e=>e.trim()).filter(e=>e.length>0),r={name:j.name,description:j.description||null,price:j.price,originalPrice:j.originalPrice||null,stock:j.stock,categoryId:j.categoryId,images:e,isActive:j.isActive,isFeatured:j.isFeatured},s=await fetch("/api/admin/products/".concat(t),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),i=await s.json();if(!s.ok||!i.success)throw Error(i.error||"\xdcr\xfcn g\xfcncellenirken hata oluştu");a.push("/admin/products")}catch(e){console.error("\xdcr\xfcn g\xfcncelleme hatası:",e),b(e instanceof Error?e.message:"\xdcr\xfcn g\xfcncellenirken hata oluştu")}finally{g(!1)}};return h?(0,r.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"\xdcr\xfcn y\xfckleniyor..."})]})}):y?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("p",{className:"text-red-600 mb-4",children:y}),(0,r.jsx)(c(),{href:"/admin/products",className:"text-blue-600 hover:underline",children:"\xdcr\xfcnler listesine d\xf6n"})]}):l?(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"\xdcr\xfcn D\xfczenle"}),(0,r.jsxs)("p",{className:"text-gray-600 mt-1",children:['"',l.name,'" \xfcr\xfcn\xfcn\xfc d\xfczenliyorsunuz']})]}),(0,r.jsxs)(c(),{href:"/admin/products",className:"flex items-center gap-2 text-blue-600 hover:underline",children:[(0,r.jsx)(i.A,{className:"w-4 h-4"}),"Geri"]})]}),(0,r.jsxs)("form",{onSubmit:f,className:"bg-white rounded-xl shadow p-8 max-w-2xl mx-auto space-y-6",children:[y&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,r.jsx)("p",{className:"text-red-600 text-sm",children:y})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"\xdcr\xfcn Adı *"}),(0,r.jsx)("input",{type:"text",id:"name",name:"name",value:j.name,onChange:v,required:!0,className:"admin-input",placeholder:"\xdcr\xfcn adı"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"A\xe7ıklama"}),(0,r.jsx)("textarea",{id:"description",name:"description",value:j.description,onChange:v,rows:4,className:"admin-textarea",placeholder:"\xdcr\xfcn a\xe7ıklaması"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700 mb-2",children:"Satış Fiyatı (₺) *"}),(0,r.jsx)("input",{type:"number",id:"price",name:"price",value:j.price,onChange:v,required:!0,min:"0",step:"0.01",className:"admin-input",placeholder:"0.00"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"originalPrice",className:"block text-sm font-medium text-gray-700 mb-2",children:"Orijinal Fiyat (₺)"}),(0,r.jsx)("input",{type:"number",id:"originalPrice",name:"originalPrice",value:j.originalPrice,onChange:v,min:"0",step:"0.01",className:"admin-input",placeholder:"0.00"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"İndirimli satış i\xe7in"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"stock",className:"block text-sm font-medium text-gray-700 mb-2",children:"Stok Adedi *"}),(0,r.jsx)("input",{type:"number",id:"stock",name:"stock",value:j.stock,onChange:v,required:!0,min:"0",className:"admin-input",placeholder:"0"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"categoryId",className:"block text-sm font-medium text-gray-700 mb-2",children:"Kategori *"}),(0,r.jsxs)("select",{id:"categoryId",name:"categoryId",value:j.categoryId,onChange:v,required:!0,className:"admin-select",children:[(0,r.jsx)("option",{value:"",children:"Kategori se\xe7in"}),m.map(e=>(0,r.jsx)("option",{value:e.id,children:e.parent?"".concat(e.parent.name," > ").concat(e.name):e.name},e.id))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"images",className:"block text-sm font-medium text-gray-700 mb-2",children:"\xdcr\xfcn G\xf6rselleri"}),(0,r.jsx)("input",{type:"text",id:"images",name:"images",value:j.images,onChange:v,className:"admin-input",placeholder:"G\xf6rsel URL'lerini virg\xfcl ile ayırarak girin"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Birden fazla g\xf6rsel i\xe7in URL'leri virg\xfcl ile ayırın. \xd6rnek: url1, url2, url3"})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"isActive",name:"isActive",checked:j.isActive,onChange:v,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,r.jsx)("label",{htmlFor:"isActive",className:"text-sm text-gray-700",children:"\xdcr\xfcn aktif"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"isFeatured",name:"isFeatured",checked:j.isFeatured,onChange:v,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,r.jsx)("label",{htmlFor:"isFeatured",className:"text-sm text-gray-700",children:"\xd6ne \xe7ıkan \xfcr\xfcn"})]})]}),(0,r.jsx)("button",{type:"submit",disabled:p,className:"w-full py-3 px-6 rounded-lg font-semibold transition-colors flex items-center justify-center gap-2 ".concat(p?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"),children:p?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Kaydediliyor..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.A,{className:"w-5 h-5"}),"Değişiklikleri Kaydet"]})})]})]}):(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"\xdcr\xfcn bulunamadı"}),(0,r.jsx)(c(),{href:"/admin/products",className:"text-blue-600 hover:underline",children:"\xdcr\xfcnler listesine d\xf6n"})]})}},3784:(e,a,t)=>{Promise.resolve().then(t.bind(t,1446))},4229:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(9946).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},5695:(e,a,t)=>{"use strict";var r=t(8999);t.o(r,"useParams")&&t.d(a,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(a,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(a,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(a,{useSearchParams:function(){return r.useSearchParams}})},7550:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(9946).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])}},e=>{var a=a=>e(e.s=a);e.O(0,[95,8441,9303,7358],()=>a(3784)),_N_E=e.O()}]);