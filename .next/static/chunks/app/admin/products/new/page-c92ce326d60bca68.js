(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9770],{2764:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>u});var s=a(5155),i=a(2115),t=a(7550),l=a(4229),n=a(6874),c=a.n(n),d=a(5695);let o={name:"",price:"",originalPrice:"",stock:"",categoryId:"",images:"",description:"",isActive:!0,isFeatured:!1};function u(){let e=(0,d.useRouter)(),[r,a]=(0,i.useState)(o),[n,u]=(0,i.useState)([]),[m,g]=(0,i.useState)(!1),[h,p]=(0,i.useState)(!0),[x,b]=(0,i.useState)("");(0,i.useEffect)(()=>{f()},[]);let f=async()=>{try{p(!0);let e=await fetch("/api/categories"),r=await e.json();if(r.success){let e=[];r.data.forEach(r=>{e.push({id:r.id,name:r.name,slug:r.slug}),r.subcategories.forEach(a=>{e.push({id:a.id,name:"".concat(r.name," > ").concat(a.name),slug:a.slug})})}),u(e)}}catch(e){console.error("Categories fetch error:",e)}finally{p(!1)}},y=e=>{let{name:r,value:s,type:i}=e.target;a(a=>({...a,[r]:"checkbox"===i&&"checked"in e.target?e.target.checked:s}))},j=e=>e.toLowerCase().replace(/ğ/g,"g").replace(/ü/g,"u").replace(/ş/g,"s").replace(/ı/g,"i").replace(/ö/g,"o").replace(/ç/g,"c").replace(/[^a-z0-9\s-]/g,"").trim().replace(/\s+/g,"-").replace(/-+/g,"-"),v=async a=>{if(a.preventDefault(),b(""),!r.name.trim())return void b("\xdcr\xfcn adı gereklidir");if(!r.categoryId)return void b("Kategori se\xe7ilmelidir");if(!r.price||0>=Number(r.price))return void b("Ge\xe7erli bir fiyat girilmelidir");if(!r.stock||0>Number(r.stock))return void b("Ge\xe7erli bir stok miktarı girilmelidir");try{g(!0);let a=r.images?r.images.split(",").map(e=>e.trim()).filter(e=>e):[],s={name:r.name.trim(),slug:j(r.name.trim()),description:r.description.trim(),price:Number(r.price),originalPrice:r.originalPrice?Number(r.originalPrice):null,images:a,stock:Number(r.stock),isActive:r.isActive,isFeatured:r.isFeatured,categoryId:r.categoryId},i=await fetch("/api/admin/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),t=await i.json();t.success?(alert("\xdcr\xfcn başarıyla eklendi!"),e.push("/admin/products")):b(t.error||"\xdcr\xfcn eklenirken hata oluştu")}catch(e){console.error("Submit error:",e),b("\xdcr\xfcn eklenirken hata oluştu")}finally{g(!1)}};return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Yeni \xdcr\xfcn Ekle"}),(0,s.jsxs)(c(),{href:"/admin/products",className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 transition-colors",children:[(0,s.jsx)(t.A,{className:"w-4 h-4"}),"Geri"]})]}),(0,s.jsxs)("form",{onSubmit:v,className:"bg-white rounded-xl shadow p-8 max-w-2xl mx-auto space-y-6",children:[x&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,s.jsx)("div",{className:"text-red-600 text-sm",children:x})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"\xdcr\xfcn Adı *"}),(0,s.jsx)("input",{type:"text",id:"name",name:"name",value:r.name,onChange:y,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\xdcr\xfcn adı"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"A\xe7ıklama"}),(0,s.jsx)("textarea",{id:"description",name:"description",value:r.description,onChange:y,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\xdcr\xfcn a\xe7ıklaması"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700 mb-2",children:"Fiyat (₺) *"}),(0,s.jsx)("input",{type:"number",id:"price",name:"price",value:r.price,onChange:y,required:!0,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"originalPrice",className:"block text-sm font-medium text-gray-700 mb-2",children:"Eski Fiyat (₺)"}),(0,s.jsx)("input",{type:"number",id:"originalPrice",name:"originalPrice",value:r.originalPrice,onChange:y,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"İndirimli fiyat i\xe7in"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"stock",className:"block text-sm font-medium text-gray-700 mb-2",children:"Stok *"}),(0,s.jsx)("input",{type:"number",id:"stock",name:"stock",value:r.stock,onChange:y,required:!0,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Stok miktarı"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"categoryId",className:"block text-sm font-medium text-gray-700 mb-2",children:"Kategori *"}),h?(0,s.jsx)("div",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100",children:(0,s.jsx)("div",{className:"animate-pulse",children:"Kategoriler y\xfckleniyor..."})}):(0,s.jsxs)("select",{id:"categoryId",name:"categoryId",value:r.categoryId,onChange:y,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"",children:"Kategori se\xe7in"}),n.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"images",className:"block text-sm font-medium text-gray-700 mb-2",children:"G\xf6rsel URL'leri"}),(0,s.jsx)("input",{type:"text",id:"images",name:"images",value:r.images,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"G\xf6rsel URL'leri virg\xfcl ile ayırın"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Birden fazla g\xf6rsel i\xe7in URL'leri virg\xfcl ile ayırın"})]}),(0,s.jsxs)("div",{className:"flex items-start gap-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",id:"isActive",name:"isActive",checked:r.isActive,onChange:y,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,s.jsx)("label",{htmlFor:"isActive",className:"text-sm text-gray-700",children:"Aktif"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",id:"isFeatured",name:"isFeatured",checked:r.isFeatured,onChange:y,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,s.jsx)("label",{htmlFor:"isFeatured",className:"text-sm text-gray-700",children:"\xd6ne \xc7ıkan"})]})]}),(0,s.jsx)("div",{className:"pt-4",children:(0,s.jsx)("button",{type:"submit",disabled:m||h,className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-700 transition-colors flex items-center justify-center gap-2 disabled:bg-gray-400 disabled:cursor-not-allowed",children:m?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Kaydediliyor..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.A,{className:"w-5 h-5"}),"\xdcr\xfcn Ekle"]})})})]})]})}},4229:(e,r,a)=>{"use strict";a.d(r,{A:()=>s});let s=(0,a(9946).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},4718:(e,r,a)=>{Promise.resolve().then(a.bind(a,2764))},5695:(e,r,a)=>{"use strict";var s=a(8999);a.o(s,"useParams")&&a.d(r,{useParams:function(){return s.useParams}}),a.o(s,"usePathname")&&a.d(r,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(r,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(r,{useSearchParams:function(){return s.useSearchParams}})},7550:(e,r,a)=>{"use strict";a.d(r,{A:()=>s});let s=(0,a(9946).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])}},e=>{var r=r=>e(e.s=r);e.O(0,[95,8441,9303,7358],()=>r(4718)),_N_E=e.O()}]);