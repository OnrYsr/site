(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3789],{672:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>m});var r=t(5155),n=t(2115),s=t(7550),l=t(4229),i=t(6874),d=t.n(i),c=t(5695);function m(){let e=(0,c.useParams)(),a=(0,c.useRouter)(),t=e.id,[i,m]=(0,n.useState)(null),[o,u]=(0,n.useState)(!0),[h,x]=(0,n.useState)(!1),[b,g]=(0,n.useState)(null),[p,y]=(0,n.useState)({title:"",subtitle:"",image:"",link:"",type:"HERO",order:0,isActive:!0,startDate:"",endDate:""});(0,n.useEffect)(()=>{(async()=>{if(t)try{u(!0),g(null);let e=await fetch("/api/banners/".concat(t));if(!e.ok)return void(404===e.status?g("Banner bulunamadı"):g("Banner y\xfcklenirken hata oluştu"));let a=await e.json();if(!a.success||!a.data)return void g("Banner verileri alınamadı");let r=a.data;m(r),y({title:r.title,subtitle:r.subtitle||"",image:r.image,link:r.link||"",type:r.type||"HERO",order:r.order,isActive:r.isActive,startDate:r.startDate?r.startDate.split("T")[0]:"",endDate:r.endDate?r.endDate.split("T")[0]:""})}catch(e){console.error("Banner y\xfcklenirken hata:",e),g("Banner y\xfcklenirken hata oluştu")}finally{u(!1)}})()},[t]);let j=e=>{let{name:a,value:t,type:r}=e.target;y(n=>({...n,[a]:"checkbox"===r&&"checked"in e.target?e.target.checked:"number"===r?Number(t):t}))},f=async e=>{e.preventDefault(),x(!0),g(null);try{if(!p.title.trim())throw Error("Banner başlığı gereklidir");if(!p.image.trim())throw Error("Banner g\xf6rseli gereklidir");if(p.order<0)throw Error("Sıralama değeri 0 veya daha b\xfcy\xfck olmalıdır");if(p.startDate&&p.endDate){let e=new Date(p.startDate),a=new Date(p.endDate);if(e>=a)throw Error("Başlangı\xe7 tarihi bitiş tarihinden \xf6nce olmalıdır")}let e={title:p.title.trim(),subtitle:p.subtitle.trim()||null,image:p.image.trim(),link:p.link.trim()||null,order:p.order,isActive:p.isActive,startDate:p.startDate||null,endDate:p.endDate||null},r=await fetch("/api/banners/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),n=await r.json();if(!r.ok||!n.success)throw Error(n.error||"Banner g\xfcncellenirken hata oluştu");a.push("/admin/banners")}catch(e){console.error("Banner g\xfcncelleme hatası:",e),g(e instanceof Error?e.message:"Banner g\xfcncellenirken hata oluştu")}finally{x(!1)}};return o?(0,r.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Banner y\xfckleniyor..."})]})}):b?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("p",{className:"text-red-600 mb-4",children:b}),(0,r.jsx)(d(),{href:"/admin/banners",className:"text-blue-600 hover:underline",children:"Banner listesine d\xf6n"})]}):i?(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Banner D\xfczenle"}),(0,r.jsxs)("p",{className:"text-gray-600 mt-1",children:['"',i.title,"\" banner'ını d\xfczenliyorsunuz"]})]}),(0,r.jsxs)(d(),{href:"/admin/banners",className:"flex items-center gap-2 text-blue-600 hover:underline",children:[(0,r.jsx)(s.A,{className:"w-4 h-4"}),"Geri"]})]}),(0,r.jsxs)("form",{onSubmit:f,className:"bg-white rounded-xl shadow p-8 max-w-2xl mx-auto space-y-6",children:[b&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,r.jsx)("p",{className:"text-red-600 text-sm",children:b})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Banner Başlığı *"}),(0,r.jsx)("input",{type:"text",id:"title",name:"title",value:p.title,onChange:j,required:!0,className:"admin-input",placeholder:"Banner başlığı"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"subtitle",className:"block text-sm font-medium text-gray-700 mb-2",children:"Alt Başlık"}),(0,r.jsx)("input",{type:"text",id:"subtitle",name:"subtitle",value:p.subtitle,onChange:j,className:"admin-input",placeholder:"Banner alt başlığı (opsiyonel)"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"image",className:"block text-sm font-medium text-gray-700 mb-2",children:"G\xf6rsel URL *"}),(0,r.jsx)("input",{type:"url",id:"image",name:"image",value:p.image,onChange:j,required:!0,className:"admin-input",placeholder:"https://example.com/banner-image.jpg"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Banner g\xf6rseli i\xe7in ge\xe7erli bir URL girin"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"link",className:"block text-sm font-medium text-gray-700 mb-2",children:"Link URL"}),(0,r.jsx)("input",{type:"url",id:"link",name:"link",value:p.link,onChange:j,className:"admin-input",placeholder:"https://example.com/target-page (opsiyonel)"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Banner tıklandığında y\xf6nlendirilecek sayfa"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"order",className:"block text-sm font-medium text-gray-700 mb-2",children:"Sıralama"}),(0,r.jsx)("input",{type:"number",id:"order",name:"order",value:p.order,onChange:j,min:"0",className:"admin-input",placeholder:"0"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"D\xfcş\xfck sayılar \xf6nce g\xf6sterilir"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 mb-2",children:"Başlangı\xe7 Tarihi"}),(0,r.jsx)("input",{type:"date",id:"startDate",name:"startDate",value:p.startDate,onChange:j,className:"admin-input"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 mb-2",children:"Bitiş Tarihi"}),(0,r.jsx)("input",{type:"date",id:"endDate",name:"endDate",value:p.endDate,onChange:j,className:"admin-input"})]})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Tarih aralığı belirtilmezse banner s\xfcrekli aktif olur"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"isActive",name:"isActive",checked:p.isActive,onChange:j,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,r.jsx)("label",{htmlFor:"isActive",className:"text-sm text-gray-700",children:"Banner aktif"})]}),p.image&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\xd6nizleme"}),(0,r.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:(0,r.jsx)("img",{src:p.image,alt:"Banner \xf6nizleme",className:"max-w-full h-32 object-cover rounded",onError:e=>{e.target.style.display="none"}})})]}),(0,r.jsx)("button",{type:"submit",disabled:h,className:"w-full py-3 px-6 rounded-lg font-semibold transition-colors flex items-center justify-center gap-2 ".concat(h?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"),children:h?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Kaydediliyor..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.A,{className:"w-5 h-5"}),"Değişiklikleri Kaydet"]})})]})]}):(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"Banner bulunamadı"}),(0,r.jsx)(d(),{href:"/admin/banners",className:"text-blue-600 hover:underline",children:"Banner listesine d\xf6n"})]})}},711:(e,a,t)=>{Promise.resolve().then(t.bind(t,672))},4229:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(9946).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},5695:(e,a,t)=>{"use strict";var r=t(8999);t.o(r,"useParams")&&t.d(a,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(a,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(a,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(a,{useSearchParams:function(){return r.useSearchParams}})},7550:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(9946).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])}},e=>{var a=a=>e(e.s=a);e.O(0,[95,8441,9303,7358],()=>a(711)),_N_E=e.O()}]);